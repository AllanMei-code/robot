/* =========================================================
 * GameSawa 深色主题 · 活力青绿配色（按你的配色卡调整）
 * 只改 :root 变量即可全局换色
 * =======================================================*/
:root{
  /* 页面与面板 */
  --page-bg:            #0B0F14;      /* 背景层 0 */
  --panel-bg:           #0F141A;      /* 背景层 1 / 面板底 */
  --panel-border:       #263241;      /* 边框 */

  /* 基础文字 */
  --text-default:       #E6EDF5;
  --text-muted:         #97A6B7;

  /* 输入框与工具按钮 */
  --input-bg:           #0F141A;
  --input-border:       #334155;      /* 略亮，方便聚焦 */
  --input-placeholder:  #6B7A8C;

  --tool-bg:            #0F141A;
  --tool-border:        #334155;
  --tool-hover-bg:      #256647;      /* 悬停变色 */

  /* 主色 / 发送 */
  --primary:            #3B82F6;      /* Primary 蓝 */
  --primary-contrast:   #FFFFFF;

  /* 聊天气泡（活力青绿方案） */
  --bubble-text:        #F1FAFF;
  /* 对方气泡：深蓝青 → 深海蓝 渐变 */
  --bubble-agent-grad:  linear-gradient(135deg,#0A2330 100%， #0D3342 0%,);
  /* 我的气泡：明亮青绿 → 靛青 渐变（活力） */
  --bubble-client-grad: linear-gradient(135deg, #06B6D4 0%, #10B981 100%);

  /* 时间徽标 */
  --time-bg:            rgba(13,18,27,.78);
  --time-text:          #E2E8F0;
  --time-border:        rgba(148,163,184,.35);
  --time-offset-x:      8px;   /* 与气泡左右边的距离 */
  --time-offset-y:      22px;  /* 气泡底部到时间徽标的垂直距离 */

  /* Emoji 面板 */
  --emoji-bg:           #0F141A;
  --emoji-border:       #334155;

  /* 滚动条 */
  --scrollbar-thumb:    #334155;

  /* 背景装饰（LOGO + 渐变光晕） */
  --bg-logo:            url("bg_logo.png"); /* 放到 assets/ 目录，或换成你的路径 */
  --bg-grad1:           radial-gradient(1100px 520px at 20% -10%, rgba(59,130,246,.08), transparent 60%);
  --bg-grad2:           radial-gradient(900px 460px at 120% 25%, rgba(16,185,129,.08), transparent 60%);
}

/* =============== 页面骨架 =============== */
html, body{ height: 100%; }
body{
  margin: 0;
  background: var(--page-bg);
  color: var(--text-default);
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans SC", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
}
.container{
  display: flex; gap: 16px; padding: 16px;
  height: 100vh; box-sizing: border-box;
}
.panel{
  flex: 1; min-width: 0; display: flex; flex-direction: column;
  background: var(--panel-bg);
  border: 1px solid var(--panel-border);
  border-radius: 14px; overflow: hidden;
}
.panel h2{
  margin: 0; padding: 12px 16px;
  border-bottom: 1px solid var(--panel-border);
  background: #0B0F14;            /* 背景层 0 */
  font-size: 14px; letter-spacing: .5px; color: #9AD0FF;
}

/* =============== 消息区 =============== */
.message-area{
  flex: 1; padding: 14px; overflow-y: auto;
  scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) transparent;
  background:
    var(--bg-grad1),
    var(--bg-grad2),
    var(--bg-logo) center/320px auto no-repeat,
    var(--panel-bg);
  background-blend-mode: screen, screen, normal, normal;
}
.message-area::-webkit-scrollbar{ width: 8px; }
.message-area::-webkit-scrollbar-thumb{ background: var(--scrollbar-thumb); border-radius: 8px; }

/* =============== 输入区 =============== */
.input-area{
  display: flex; align-items: center; gap: 8px;
  padding: 10px; border-top: 1px solid var(--panel-border); background: #0B0F14;
}
.input-area input[type="text"]{
  flex: 1; min-width: 0; height: 44px; padding: 0 12px;
  background: var(--input-bg); color: var(--text-default);
  border: 1px solid var(--input-border); border-radius: 12px; outline: none;
}
.input-area input[type="text"]::placeholder{ color: var(--input-placeholder); }

/* 工具按钮（相机/表情/发送）统一尺寸 */
.tool-btn,
#client-send, #agent-send,
label[for="client-file"], label[for="agent-file"]{
  width: 44px; height: 44px; padding: 0;
  border: 1px solid var(--tool-border);
  border-radius: 12px; background: var(--tool-bg); color: var(--text-default);
  display: inline-flex; align-items: center; justify-content: center;
  cursor: pointer; user-select: none; transition: all .15s ease;
}
.tool-btn:hover,
#client-send:hover, #agent-send:hover,
label[for="client-file"]:hover, label[for="agent-file"]:hover{
  background: var(--tool-hover-bg); border-color: #475569;
}

/* 主按钮（发送） */
.primary{ background: var(--primary); border-color: var(--primary); color: var(--primary-contrast); }
.primary:hover{ background: var(--tool-hover-bg); color: #fff; }

/* 上线/下线切换按钮 */
.status-btn{
  height: 44px; min-width: 70px; padding: 0 12px;
  border-radius: 12px; border: 1px solid var(--tool-border);
  background: var(--tool-bg); color: var(--text-default);
  cursor: pointer; transition: all .15s ease; font-weight: 600;
}
.status-btn.online{  background:#10B981; border-color:#10B981; color:#031E16; }
.status-btn.offline{ background:#EF4444; border-color:#EF4444; color:#260404; }

/* 隐藏原生 file */
input[type="file"]#client-file,
input[type="file"]#agent-file{ display:none; }

/* =============== 气泡消息 =============== */
.message-wrapper{ display:flex; margin: 8px 0; }
.message-wrapper.left{  justify-content:flex-start; }
.message-wrapper.right{ justify-content:flex-end; }

.message-content{
  position: relative;
  max-width: 72%;
  padding: 12px 14px;
  border-radius: 16px;
  background: #172136;                       /* 兜底底色 */
  color: var(--bubble-text) !important;
  box-shadow: 0 2px 6px rgba(0,0,0,.28);
  margin-bottom: calc(var(--time-offset-y) + 4px);
  mix-blend-mode: normal;
}
.message-content.client{ background: var(--bubble-client-grad); }
.message-content.agent { background: var(--bubble-agent-grad);  }

.message-content .message-title,
.message-content .message-body{
  color: var(--bubble-text) !important;
  opacity: 1 !important;
  text-shadow: 0 1px 1px rgba(0,0,0,.25);
  font-weight: 500;
}

/* 时间徽标 */
.message-time{
  position: absolute;
  bottom: calc(-1 * var(--time-offset-y));
  /* 默认走右对齐，具体在下面按左右侧覆写 */
  right: var(--time-offset-x);
  left: auto;

  font-size: 11px;
  color: var(--time-text) !important;
  background: var(--time-bg) !important;
  border: 1px solid var(--time-border) !important;
  padding: 2px 6px;
  border-radius: 6px;
  white-space: nowrap;
  font-variant-numeric: tabular-nums;
  backdrop-filter: blur(2px);
}
/* 左侧消息：时间贴左边界对齐 */
.message-wrapper.left .message-time{
  left: var(--time-offset-x);
  right: auto;
}

/* 右侧消息：时间贴右边界对齐 */
.message-wrapper.right .message-time{
  right: var(--time-offset-x);
  left: auto;
}
/* 图片消息 */
.chat-image{
  max-width: 240px; max-height: 240px;
  border-radius: 12px; display:block;
}

/* Emoji 面板 */
.emoji-panel{
  display:none; position:absolute; bottom:56px; right:10px;
  background: var(--emoji-bg);
  border: 1px solid var(--emoji-border);
  border-radius: 12px; padding: 8px;
  box-shadow: 0 10px 30px rgba(0,0,0,.35);
  z-index: 20;
}
.emoji-panel span{ cursor:pointer; font-size:22px; margin:4px; display:inline-block; }

/* 保险：避免子元素被混合模式影响 */
.message-content *{ mix-blend-mode: normal !important; }

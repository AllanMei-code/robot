/* =========================================================
 * GameSawa 深色主题 CSS
 * 只需修改 :root 变量即可全局换色
 * =======================================================*/
:root{
  /* 页面与面板 */
  --page-bg:            #0b1220;
  --panel-bg:           #0f172a;
  --panel-border:       #1e293b;

  /* 基础文字 */
  --text-default:       #e5e7eb;
  --text-muted:         #94a3b8;

  /* 输入框与工具按钮 */
  --input-bg:           #0f172a;
  --input-border:       #334155;
  --input-placeholder:  #64748b;

  --tool-bg:            #0f172a;
  --tool-border:        #334155;
  --tool-hover-bg:      #000000;    /* 悬停变黑（你之前的要求） */

  --primary:            #2563eb;    /* 发送按钮主色 */
  --primary-contrast:   #ffffff;

  /* 聊天气泡 */
  --bubble-text:        #eaf2ff;
  --bubble-bg-base:     #172136;    /* 通用底色（未分角色时） */
  --bubble-bg-client:   #12486f;    /* 客户气泡背景  */
  --bubble-bg-agent:    #3a2a72;    /* 客服气泡背景  */

  /* 时间徽标 */
  --time-bg:            rgba(15,23,42,.72);
  --time-text:          #e2e8f0;
  --time-border:        rgba(148,163,184,.35);

  /* Emoji 面板 */
  --emoji-bg:           #0f172a;
  --emoji-border:       #334155;

  /* 滚动条 */
  --scrollbar-thumb:    #334155;

  /* 背景装饰（LOGO + 渐变） */
  --bg-logo:            url("bg_logo.png");          /* 放在 assets/ 同目录 */
  --bg-grad1:           radial-gradient(1200px 600px at 20% -10%, rgba(56,189,248,.06), transparent 60%);
  --bg-grad2:           radial-gradient(1000px 500px at 120% 20%, rgba(16,185,129,.06), transparent 60%);
}

/* =============== 页面骨架 =============== */
html, body{
  height: 100%;
}
body{
  margin: 0;
  background: var(--page-bg);
  color: var(--text-default);
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans SC", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
}
.container{
  display: flex;
  gap: 16px;
  padding: 16px;
  height: 100vh;
  box-sizing: border-box;
}
.panel{
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  background: var(--panel-bg);
  border: 1px solid var(--panel-border);
  border-radius: 14px;
  overflow: hidden;
}
.panel h2{
  margin: 0;
  padding: 12px 16px;
  border-bottom: 1px solid var(--panel-border);
  background: var(--page-bg);
  font-size: 14px;
  letter-spacing: .5px;
  color: #93c5fd;
}

/* =============== 消息区 =============== */
.message-area{
  flex: 1;
  padding: 14px;
  overflow-y: auto;
  scrollbar-width: thin;
  scrollbar-color: var(--scrollbar-thumb) transparent;

  /* 深色背景 + LOGO（可替换） */
  background:
    var(--bg-grad1),
    var(--bg-grad2),
    var(--bg-logo) center/320px auto no-repeat,
    var(--panel-bg);
  background-blend-mode: screen, screen, normal, normal;
}
.message-area::-webkit-scrollbar{ width: 8px; }
.message-area::-webkit-scrollbar-thumb{
  background: var(--scrollbar-thumb);
  border-radius: 8px;
}

/* =============== 输入区 =============== */
.input-area{
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px;
  border-top: 1px solid var(--panel-border);
  background: var(--page-bg);
}
.input-area input[type="text"]{
  flex: 1; min-width: 0;
  height: 44px; padding: 0 12px;
  background: var(--input-bg);
  color: var(--text-default);
  border: 1px solid var(--input-border);
  border-radius: 12px;
  outline: none;
}
.input-area input[type="text"]::placeholder{
  color: var(--input-placeholder);
}

/* 统一工具按钮尺寸（相机/表情/发送） */
.tool-btn,
#client-send, #agent-send,
label[for="client-file"], label[for="agent-file"]{
  width: 44px; height: 44px;
  border: 1px solid var(--tool-border);
  border-radius: 12px;
  background: var(--tool-bg);
  color: var(--text-default);
  display: inline-flex; align-items: center; justify-content: center;
  cursor: pointer; user-select: none; padding: 0;
  transition: all .15s ease;
}
.tool-btn:hover,
#client-send:hover, #agent-send:hover,
label[for="client-file"]:hover, label[for="agent-file"]:hover{
  background: var(--tool-hover-bg);
  border-color: #475569;
}

/* 主按钮（发送） */
.primary{
  background: var(--primary);
  border-color: var(--primary);
  color: var(--primary-contrast);
}
.primary:hover{
  background: var(--tool-hover-bg);  /* 悬停黑色 */
  color: #fff;
}

/* 上线/下线切换按钮 */
.status-btn{
  height: 44px; min-width: 70px; padding: 0 12px;
  border-radius: 12px; border: 1px solid var(--tool-border);
  background: var(--tool-bg); color: var(--text-default);
  cursor: pointer; transition: all .15s ease; font-weight: 600;
}
.status-btn.online{  background:#10b981; border-color:#10b981; color:#021b14; }
.status-btn.offline{ background:#ef4444; border-color:#ef4444; color:#1b0001; }

/* 隐藏原生 file */
input[type="file"]#client-file,
input[type="file"]#agent-file{ display:none; }

/* =============== 气泡消息 =============== */
.message-wrapper{ display:flex; margin: 8px 0; }
.message-wrapper.left{  justify-content:flex-start; }
.message-wrapper.right{ justify-content:flex-end; }

.message-content{
  position: relative;
  max-width: 72%;
  padding: 10px 12px;
  border-radius: 12px;
  background: var(--bubble-bg-base);
  color: var(--bubble-text) !important;
  box-shadow: 0 1px 3px rgba(0,0,0,.25);
  margin-bottom: 22px;          /* 给时间徽标留位置 */
  mix-blend-mode: normal;       /* 防止背景混合影响可读性 */
}
.message-content.client{ background: var(--bubble-bg-client); }
.message-content.agent { background: var(--bubble-bg-agent);  }

.message-content .message-title,
.message-content .message-body{
  color: var(--bubble-text) !important;
  opacity: 1 !important;
  text-shadow: 0 1px 1px rgba(0,0,0,.25);
  font-weight: 500;
}

/* 时间徽标 */
.message-time{
  position:absolute; right:6px; bottom:-18px;
  font-size:11px; color: var(--time-text) !important;
  background: var(--time-bg) !important;
  border: 1px solid var(--time-border) !important;
  padding: 2px 6px; border-radius: 6px;
  white-space: nowrap; font-variant-numeric: tabular-nums;
  backdrop-filter: blur(2px);
}

/* 图片消息 */
.chat-image{
  max-width: 220px; max-height: 220px;
  border-radius: 10px; display:block;
}

/* Emoji 面板 */
.emoji-panel{
  display: none;
  position: absolute; bottom: 56px; right: 10px;
  background: var(--emoji-bg);
  border: 1px solid var(--emoji-border);
  border-radius: 12px;
  padding: 8px;
  box-shadow: 0 10px 30px rgba(0,0,0,.35);
  z-index: 20;
}
.emoji-panel span{
  cursor: pointer; font-size: 22px; margin: 4px; display: inline-block;
}

/* 保险：避免子元素被混合模式影响 */
.message-content *{ mix-blend-mode: normal !important; }

/* ========== Dark Theme 基础变量 ========== */
:root{
  --bg: #0a0f16;                /* 背景 */
  --panel: rgba(16,21,30,.85);  /* 面板底色(带透明以配合背景) */
  --panel-border: #1e293b;      /* 面板描边 */
  --text: #e5e7eb;              /* 主文字 */
  --muted: #9ca3af;             /* 次级文字 */
  --bubble-client: #22c55e;     /* 客户端气泡 */
  --bubble-client-text:#052e16;
  --bubble-agent:  #60a5fa;     /* 客服端/机器人气泡 */
  --bubble-agent-text:#0b1220;
  --tool: #0f172a;              /* 工具按钮底色 */
  --tool-border:#334155;
  --tool-hover:#0b1220;
  --primary:#2563eb;            /* 主色(发送按钮) */
  --primary-hover:#000;         /* 悬停变黑（你之前的要求） */
  --shadow: 0 8px 24px rgba(0,0,0,.35);
  --radius: 12px;

  /* 背景图(可选) */
  --chat-bg-opacity: .22;       /* 背景图透明度 */
}

/* ========== 全局布局/背景 ========== */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; padding:20px;
  color:var(--text);
  background: radial-gradient(1200px 800px at 20% -10%, #0b1220 0%, var(--bg) 45%) fixed;
  font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji";
}

/* 背景图水印（可选） */
body.has-chat-bg{ position:relative; }
body.has-chat-bg::before{
  content:""; position:fixed; inset:0;
  background:
    radial-gradient(1000px 700px at 80% 10%, rgba(37,99,235,.25), transparent 60%) ,
    linear-gradient(180deg, rgba(96,165,250,.12), transparent 35%);
  pointer-events:none; z-index:-2;
}
body.has-chat-bg::after{
  content:""; position:fixed; inset:0; z-index:-1; pointer-events:none;
  background: var(--chat-bg-image) center/contain no-repeat;
  opacity: var(--chat-bg-opacity);
  filter: grayscale(100%) contrast(110%) opacity(var(--chat-bg-opacity));
}

/* ========== 两列容器 & 面板 ========== */
.container{ display:flex; gap:24px; height:90vh; }
.panel{
  flex:1; display:flex; flex-direction:column; gap:10px;
  background:var(--panel); border:1px solid var(--panel-border);
  border-radius: calc(var(--radius) + 2px);
  box-shadow: var(--shadow); backdrop-filter: blur(4px);
}
.panel h2{
  margin:10px 12px 0; font-size:16px; font-weight:700; color:#cbd5e1; opacity:.9;
}

/* ========== 消息区(滚动条) ========== */
.message-area{
  flex:1; margin:10px; padding:16px;
  overflow-y:auto; border-radius: var(--radius);
  background: rgba(11,17,26,.55); border:1px solid #1f2937;
  scrollbar-gutter: stable both-edges;
}
/* Firefox */
.message-area{ scrollbar-width:thin; scrollbar-color:#64748b #0b1220; }
/* WebKit */
.message-area::-webkit-scrollbar{ width:10px; }
.message-area::-webkit-scrollbar-thumb{ background:#64748b; border-radius:8px; }
.message-area::-webkit-scrollbar-thumb:hover{ background:#94a3b8; }
.message-area::-webkit-scrollbar-track{ background:#0b1220; border-radius:8px; }

/* ========== 输入区 & 工具按钮 ========== */
.input-area{ display:flex; align-items:center; gap:10px; padding:0 12px 14px; }
.input-area input[type="text"]{
  flex:1; height:44px; padding:0 12px;
  color:var(--text); background:#0b1220;
  border:1px solid var(--tool-border); border-radius: var(--radius);
  outline:none;
}
.input-area input::placeholder{ color:var(--muted); }

/* 统一三按钮：📷 😊 发送 */
.tool-btn,
#client-send,#agent-send,
label[for="client-file"],label[for="agent-file"]{
  width:44px; height:44px; border-radius:12px;
  background:var(--tool); color:var(--text);
  border:1px solid var(--tool-border);
  display:inline-flex; align-items:center; justify-content:center;
  cursor:pointer; user-select:none; padding:0;
  transition: all .15s ease;
}
.tool-btn:hover,
#client-send:hover,#agent-send:hover,
label[for="client-file"]:hover,label[for="agent-file"]:hover{
  background:var(--tool-hover); border-color:#475569; transform: translateY(-1px);
}
.tool-btn:active,
#client-send:active,#agent-send:active{ transform: translateY(0); }

/* 主按钮(发送) */
.tool-btn.primary,#client-send.primary,#agent-send.primary{
  background: var(--primary); border-color: var(--primary); color:#fff;
}
.tool-btn.primary:hover,#client-send.primary:hover,#agent-send.primary:hover{
  background: var(--primary-hover); border-color: var(--primary-hover); color:#fff;
}

/* SVG 图标统一随文字色渲染 */
.tool-btn svg,#client-send svg,#agent-send svg{ width:20px; height:20px; display:block; }
.tool-btn svg path,#client-send svg path,#agent-send svg path{ fill: currentColor; }

/* 隐藏原生 file input */
input[type="file"]#client-file,input[type="file"]#agent-file{ display:none; }

/* ========== 气泡 & 图片 ========== */
.message-wrapper{ display:flex; margin:10px 0; }
.message-wrapper.left{  justify-content:flex-start; }
.message-wrapper.right{ justify-content:flex-end; }
.message-content{
  max-width:72%; padding:10px 12px; border-radius:14px;
  box-shadow: 0 4px 20px rgba(0,0,0,.20); position:relative;
  word-wrap: break-word;
}
.message-content.client{ background: var(--bubble-client); color: var(--bubble-client-text); }
.message-content.agent{  background: var(--bubble-agent);  color: var(--bubble-agent-text); }
.message-title{ font-weight:700; margin-bottom:4px; font-size:12px; opacity:.9; }
.message-time{ position:absolute; bottom:-16px; right:6px; font-size:10px; color:#cbd5e1; }
.chat-image{ max-width:260px; max-height:260px; border-radius:10px; display:block; box-shadow: var(--shadow); }

/* ========== 人工/机器人状态按钮（若使用） ========== */
.status-btn{
  height:44px; min-width:68px; padding:0 12px; border-radius:12px;
  background:#0b1220; color:var(--text); border:1px solid var(--tool-border);
  cursor:pointer; transition:all .15s ease;
}
.status-btn.online{ background:#10b981; color:#021b14; border-color:#10b981; }
.status-btn.offline{ background:#ef4444; color:#1b0001; border-color:#ef4444; }
